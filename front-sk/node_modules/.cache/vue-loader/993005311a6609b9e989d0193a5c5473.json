{"remainingRequest":"C:\\Users\\multicampus\\Desktop\\s02p13a404\\front-sk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\multicampus\\Desktop\\s02p13a404\\front-sk\\src\\views\\userpage\\UserEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\multicampus\\Desktop\\s02p13a404\\front-sk\\src\\views\\userpage\\UserEdit.vue","mtime":1580699738322},{"path":"C:\\Users\\multicampus\\Desktop\\s02p13a404\\front-sk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\multicampus\\Desktop\\s02p13a404\\front-sk\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\multicampus\\Desktop\\s02p13a404\\front-sk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\multicampus\\Desktop\\s02p13a404\\front-sk\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQViBmcm9tICdwYXNzd29yZC12YWxpZGF0b3InCmltcG9ydCBVc2VyQXBpIGZyb20gJy4uLy4uL2FwaXMvVXNlckFwaScKaW1wb3J0IHJvdXRlciBmcm9tICcuLi8uLi9yb3V0ZXMuanMnCmltcG9ydCB7CiAgICBtZGlQZW5jaWwKfSBmcm9tICdAbWRpL2pzJwoKZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBlbWFpbDogdGhpcy4kcm91dGUucGFyYW1zLmluZm8uZW1haWwsCiAgICAgICAgICAgIG5pY2tuYW1lOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaW5mby5uYW1lLAogICAgICAgICAgICBwdzE6IHRoaXMuJHJvdXRlLnBhcmFtcy5pbmZvLnB3MSwKICAgICAgICAgICAgcHcyOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaW5mby5wdzEsCiAgICAgICAgICAgIHBob25lOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaW5mby5waG9uZSwKICAgICAgICAgICAgaW1hZ2U6IHRoaXMuJHJvdXRlLnBhcmFtcy5pbmZvLnBpY3R1cmUsCiAgICAgICAgICAgIHBhc3N3b3JkU2NoZW1hOiBuZXcgUFYoKSwKICAgICAgICAgICAgZXJyb3I6IHsKICAgICAgICAgICAgICAgIHB3MTogZmFsc2UsCiAgICAgICAgICAgICAgICBjb25maXJtUFc6IGZhbHNlCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBpc1N1Ym1pdDogdHJ1ZSwKICAgICAgICAgICAgc3ZnUGF0aDogbWRpUGVuY2lsCgogICAgICAgIH0KICAgIH0sCiAgICB3YXRjaDogewogICAgICAgIG5pY2tuYW1lOiBmdW5jdGlvbiAodikgewogICAgICAgICAgICB0aGlzLmNoZWNrRm9ybSgpOwogICAgICAgIH0sCiAgICAgICAgcHcxOiBmdW5jdGlvbiAodikgewogICAgICAgICAgICB0aGlzLmNoZWNrRm9ybSgpOwogICAgICAgIH0sCiAgICAgICAgcHcyOiBmdW5jdGlvbiAodikgewogICAgICAgICAgICB0aGlzLmNoZWNrRm9ybSgpOwogICAgICAgIH0sCiAgICAgICAgcGhvbmU6IGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICAgIHRoaXMuY2hlY2tGb3JtKCk7CiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgRWRpdFVzZXIoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5wYXJhbXMuaW5mbwogICAgICAgIH0KICAgICAgICAvLyDtlbTri7kg7ZqM7JuQ7J20IOyekOq4sCDsnpDsi6Dsnbjsp4Ag7JWE64uM7KeAIO2ZleyduO2VmOuKlCDtlajsiJgg66eM65Ok6riwIDogYnV0dG9u7JeQIHYtaWYh66eM65Ok6riwCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGNoZWNrRm9ybSgpIHsKICAgICAgICAgICAgLy8g6riw7KG07JeQIOyeiOuKlCDri4nrhKTsnoTsnbjsp4AKICAgICAgICAgICAgLy8g6riw7KG07JeQIOuTseuhneuQnCDtnLTrjIDtj7Ag67KI7Zi47J247KeAIO2ZleyduAoKICAgICAgICAgICAgaWYgKHRoaXMucHcxLmxlbmd0aCA+IDAgJiYgIXRoaXMucGFzc3dvcmRTY2hlbWEudmFsaWRhdGUodGhpcy5wdzEpKSB7CiAgICAgICAgICAgICAgICB0aGlzLmVycm9yLnB3MSA9ICfsmIHrrLgsIOyIq+yekCDtj6ztlaggOOyekOumrCDsnbTsg4HsnbTslrTslbwg7ZWp64uI64ukJwogICAgICAgICAgICB9IGVsc2UgdGhpcy5lcnJvci5QVyA9IGZhbHNlOwogICAgICAgICAgICBpZiAodGhpcy5wdzIubGVuZ3RoID4gMCAmJiB0aGlzLnB3MSAhPSB0aGlzLnB3MikgewogICAgICAgICAgICAgICAgdGhpcy5lcnJvci5jb25maXJtUFcgPSAn67mE67CA67KI7Zi46rCAIOydvOy5mO2VmOyngCDslYrsirXri4jri6QnCiAgICAgICAgICAgIH0gZWxzZSB0aGlzLmVycm9yLmNvbmZpcm1QVyA9IGZhbHNlOwogICAgICAgICAgICBsZXQgRWRpdGluZyA9IHRydWU7CiAgICAgICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5lcnJvcikubWFwKGVyciA9PiB7CiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgRWRpdGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLmlzU3VibWl0ID0gRWRpdGluZzsKCiAgICAgICAgfSwKICAgICAgICBlZGl0KCkgewoKICAgICAgICAgICAgaWYgKHRoaXMuaXNTdWJtaXQpIHsKICAgICAgICAgICAgICAgIGxldCB7CiAgICAgICAgICAgICAgICAgICAgZW1haWwsCiAgICAgICAgICAgICAgICAgICAgbmlja25hbWUsCiAgICAgICAgICAgICAgICAgICAgcHcxLAogICAgICAgICAgICAgICAgICAgIHBob25lLAogICAgICAgICAgICAgICAgICAgIGltYWdlCiAgICAgICAgICAgICAgICB9ID0gdGhpczsKICAgICAgICAgICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgICAgICAgICAgICJlbWFpbCI6IGVtYWlsLAogICAgICAgICAgICAgICAgICAgICJuaWNrbmFtZSI6IG5pY2tuYW1lLAogICAgICAgICAgICAgICAgICAgICJwdyI6IHB3MSwKICAgICAgICAgICAgICAgICAgICAicGhvbmUiOiBwaG9uZSwKICAgICAgICAgICAgICAgICAgICAicHJvZmlsZSI6IGltYWdlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmlzU3VibWl0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICBVc2VyQXBpLnJlcXVlc3RFZGl0KGRhdGEsIHJlcyA9PiB7CgogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCftmozsm5Ag7KCV67O0IOyImOygleyXkCDshLHqs7UnKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGBVc2VyUGFnZWAKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgZXJyb3IgPT4gewoKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi7ZqM7JuQIOygleuztCDsiJjsoJUg7Iuk7YyoICEhISIpOwogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCftmozsm5Ag7KCV67O0IOyImOyglSDsi6TtjKggISEnKQogICAgICAgICAgICAgICAgICAgIC8vIOuhnOq3uOyduCDsi6TtjKjsi5wg67KE7Yq8IOu5hO2ZnOyEse2ZlAogICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTdWJtaXQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAvLyBheGlvcyDrs7TrgrjripQg7J6l7IaMCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8vIO2UhOuhnO2VhCDsnbTrr7jsp4Ag67OA6rK9CiAgICAgICAgbG9hZChlKSB7CiAgICAgICAgICAgIHZhciBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzIHx8IGUuZGF0YVRyYW5zZmVyLmZpbGVzOwogICAgICAgICAgICBjb25zb2xlLmxvZyhlLnRhcmdldC5maWxlc1swXSkKICAgICAgICAgICAgaWYgKCFmaWxlcy5sZW5ndGgpIHJldHVybjsKICAgICAgICAgICAgdGhpcy5jcmVhdGVJbWFnZShmaWxlc1swXSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGVzWzBdLm1vekZ1bGxQYXRoKQogICAgICAgIH0sCiAgICAgICAgY3JlYXRlSW1hZ2UoZmlsZSkgewogICAgICAgICAgICBsZXQgaW1hZ2UgPSBuZXcgSW1hZ2UoKTsKICAgICAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CgogICAgICAgICAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHsKCiAgICAgICAgICAgICAgICB0aGlzLkVkaXRVc2VyLnBpY3R1cmUgPSBlLnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICAgICAgICAvLyDtjIzsnbwg6rK966GcCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlLnRhcmdldC5yZXN1bHQpCiAgICAgICAgICAgICAgICB0aGlzLmltYWdlID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogICAgICAgIH0KCiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgICAgICB0aGlzLnBhc3N3b3JkU2NoZW1hIC8vIOu5hOuwgOuyiO2YuCDtmJXsi50g7LK07YGsCiAgICAgICAgICAgIC5pcygpLm1pbig4KQogICAgICAgICAgICAuaXMoKS5tYXgoMTAwKQogICAgICAgICAgICAuaGFzKCkuZGlnaXRzKCkKICAgICAgICAgICAgLmhhcygpLmxldHRlcnMoKTsKICAgIH0KfQo="},{"version":3,"sources":["UserEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserEdit.vue","sourceRoot":"src/views/userpage","sourcesContent":["<template>\r\n    <div style=\"text-align:center;\">\r\n\r\n        <h1 style=\"margin-top: 20px; margin-bottom: 20px;\">회원정보 수정 페이지</h1>\r\n\r\n        <div>\r\n            <img :src=\"image\" :alt=\"EditUser.name\" style=\"height: 300px; width:300px;\">\r\n\r\n            <input type=\"file\" @change=\"load\" accept=\".jpg, .jpeg, .png, .gif\">\r\n\r\n\r\n        </div>\r\n\r\n        <div style=\"margin-top: 10px;\">\r\n            닉네임 변경 : <input v-model=\"nickname\" type=\"text\" id=\"nickname\" @keyup.enter=\"edit\"\r\n                :placeholder=\"EditUser.name\">\r\n        </div>\r\n\r\n        <div style=\"margin-top: 10px;\">\r\n            비밀번호 변경: <input v-model=\"pw1\" type=\"password\" id=\"pw1\" @keyup.enter=\"edit\">\r\n        </div>\r\n        <div v-if=\"error.pw1\">{{error.pw1}}</div>\r\n\r\n        <div style=\"margin-top: 10px;\">\r\n            비밀번호 확인: <input v-model=\"pw2\" type=\"password\" id=\"pw2\" @keyup.enter=\"edit\">\r\n            <div v-if=\"error.confirmPW\">{{error.confirmPW}}</div>\r\n        </div>\r\n\r\n        <div style=\"margin-top: 10px;\">\r\n            핸드폰 번호 변경: <input v-model=\"phone\" type=\"text\" id=\"phone\" :placeholder=\"EditUser.phone\">\r\n        </div>\r\n        <v-btn class=\"ma-2\" tile outlined color=\"success\" @click=\"edit\">\r\n            <v-icon left>{{ svgPath }}</v-icon>\r\n            EDIT\r\n        </v-btn>\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import PV from 'password-validator'\r\n    import UserApi from '../../apis/UserApi'\r\n    import router from '../../routes.js'\r\n    import {\r\n        mdiPencil\r\n    } from '@mdi/js'\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                email: this.$route.params.info.email,\r\n                nickname: this.$route.params.info.name,\r\n                pw1: this.$route.params.info.pw1,\r\n                pw2: this.$route.params.info.pw1,\r\n                phone: this.$route.params.info.phone,\r\n                image: this.$route.params.info.picture,\r\n                passwordSchema: new PV(),\r\n                error: {\r\n                    pw1: false,\r\n                    confirmPW: false\r\n                },\r\n\r\n                isSubmit: true,\r\n                svgPath: mdiPencil\r\n\r\n            }\r\n        },\r\n        watch: {\r\n            nickname: function (v) {\r\n                this.checkForm();\r\n            },\r\n            pw1: function (v) {\r\n                this.checkForm();\r\n            },\r\n            pw2: function (v) {\r\n                this.checkForm();\r\n            },\r\n            phone: function (v) {\r\n                this.checkForm();\r\n            }\r\n        },\r\n        computed: {\r\n            EditUser() {\r\n                return this.$route.params.info\r\n            }\r\n            // 해당 회원이 자기 자신인지 아닌지 확인하는 함수 만들기 : button에 v-if!만들기\r\n        },\r\n        methods: {\r\n            checkForm() {\r\n                // 기존에 있는 닉네임인지\r\n                // 기존에 등록된 휴대폰 번호인지 확인\r\n\r\n                if (this.pw1.length > 0 && !this.passwordSchema.validate(this.pw1)) {\r\n                    this.error.pw1 = '영문, 숫자 포함 8자리 이상이어야 합니다'\r\n                } else this.error.PW = false;\r\n                if (this.pw2.length > 0 && this.pw1 != this.pw2) {\r\n                    this.error.confirmPW = '비밀번호가 일치하지 않습니다'\r\n                } else this.error.confirmPW = false;\r\n                let Editing = true;\r\n                Object.values(this.error).map(err => {\r\n                    if (err) {\r\n                        Editing = false;\r\n                    }\r\n                })\r\n                this.isSubmit = Editing;\r\n\r\n            },\r\n            edit() {\r\n\r\n                if (this.isSubmit) {\r\n                    let {\r\n                        email,\r\n                        nickname,\r\n                        pw1,\r\n                        phone,\r\n                        image\r\n                    } = this;\r\n                    let data = {\r\n                        \"email\": email,\r\n                        \"nickname\": nickname,\r\n                        \"pw\": pw1,\r\n                        \"phone\": phone,\r\n                        \"profile\": image\r\n                    }\r\n                    this.isSubmit = false;\r\n                    UserApi.requestEdit(data, res => {\r\n\r\n                        alert('회원 정보 수정에 성공');\r\n                        this.$router.push({\r\n                            name: `UserPage`\r\n                        })\r\n                    }, error => {\r\n\r\n                        console.log(\"회원 정보 수정 실패 !!!\");\r\n                        alert('회원 정보 수정 실패 !!')\r\n                        // 로그인 실패시 버튼 비활성화\r\n                        this.isSubmit = false;\r\n                    })\r\n                    // axios 보낸는 장소\r\n                }\r\n            },\r\n            // 프로필 이미지 변경\r\n            load(e) {\r\n                var files = e.target.files || e.dataTransfer.files;\r\n                console.log(e.target.files[0])\r\n                if (!files.length) return;\r\n                this.createImage(files[0]);\r\n                console.log(files[0].mozFullPath)\r\n            },\r\n            createImage(file) {\r\n                let image = new Image();\r\n                let reader = new FileReader();\r\n\r\n                reader.onload = (e) => {\r\n\r\n                    this.EditUser.picture = e.target.result;\r\n                    // 파일 경로\r\n                    console.log(e.target.result)\r\n                    this.image = e.target.result;\r\n                }\r\n                reader.readAsDataURL(file);\r\n            }\r\n\r\n        },\r\n        created() {\r\n            this.passwordSchema // 비밀번호 형식 체크\r\n                .is().min(8)\r\n                .is().max(100)\r\n                .has().digits()\r\n                .has().letters();\r\n        }\r\n    }\r\n</script>"]}]}